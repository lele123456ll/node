# 前缀和&差分

## 前缀和

- 一维

    ```c++
    s[i] = a[0] + a[1] + ... + a[i];
    
    s[i] = s[i - 1] + a[i]
        
    区间和:
    [l, r] => s[r] - s[l - 1]
    ```

- 二维

    ```c++
    s[i][j] : 表示(0, 0) 到 (i, j) 包围的矩阵的和
    
    求法:
    // s[i - 1][j - 1]加了两遍, 所以要减去一个
    s[i][j] = s[i-1][j] + s[i][j - 1] + a[i][j] - s[i - 1][j - 1]; 
    ```

## 差分

- 一维

    ```c++
    原数组 : a[] = {-2, 2, 4, 3, 5};
    
    差分数组: b[] = {-2, 4, 2, -1, 2};
    
    void insert(int i, int j, int c) {
        q[l] += c;
        q[r] -= c;
    }
    ```

     

-  二维

    ```c++
    void insert(int x1, int y1, int x2, int y2, int c) {
        s[x1][y1] += c;
        s[x1][y2 + 1] -= c;
        s[x2 + 1][y1] -= c;
        s[x2 + 1][y2 + 1] += c;
    }
    ```

    

